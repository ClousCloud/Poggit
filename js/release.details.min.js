var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,f,c){a instanceof String&&(a=String(a));for(var d=a.length,g=0;g<d;g++){var k=a[g];if(f.call(c,k,g,a))return{i:g,v:k}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,f,c){a!=Array.prototype&&a!=Object.prototype&&(a[f]=c.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,f,c,d){if(f){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var g=a[d];g in c||(c[g]={});c=c[g]}a=a[a.length-1];d=c[a];f=f(d);f!=d&&null!=f&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:f})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");$jscomp.checkStringArgs=function(a,f,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(f instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};
$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(a,c){var d=$jscomp.checkStringArgs(this,a,"startsWith");a+="";var f=d.length,k=a.length;c=Math.max(0,Math.min(c|0,d.length));for(var h=0;h<k&&c<f;)if(d[c++]!=a[h++])return!1;return h>=k}},"es6","es3");
$(function(){var a=function(a){var l=a.attr("id"),c=[];a.find("a.anchor").each(function(){var a=$(this).addClass("dynamic-anchor").html("&sect;"),b=a.parent();a.appendTo(b);var e=this.id.substring(13);c.push(e);var d=l+"-section-"+e;b.attr("data-base-anchor",e);a.attr("id",d).attr("href","#"+d).removeAttr("aria-hidden");dynamicAnchor.call(this)});var d=[];a.find("a[name^='user-content-']").each(function(){var a=$(this),b=this.name.substring(13);d.push(b);a.attr("id",l+"-anchor-"+b)});a.find("[id^='user-content-']").each(function(){var a=
$(this),b=this.id.substring(13);d.push(b);a.attr("id",l+"-anchor-user-"+b)});var f=function(a){return function(){var b=$(this),e=b.attr(a);switch(/^https?:\/\//i.test(e)?1:e.startsWith("//")?2:"/"===e.charAt(0)?3:"#"!==e.charAt(0)?4:5){case 5:e.startsWith("#poggit-")?b.attr(a,"#"+e.substring(8)):(e=e.substring(1),e.startsWith("user-content-")&&(e=e.substring(13)),-1!==c.indexOf(e)?b.attr(a,"#"+(l+"-section-"+e)):-1!==d.indexOf(e)&&b.attr(a,"#"+(l+"-anchor-"+e)));break;case 4:b.attr(a,"https://github.com/"+
releaseDetails.project.repo.owner+"/"+releaseDetails.project.repo.name+"/blob/"+releaseDetails.build.tree+e);break;case 3:b.attr(a,"https://github.com"+e);break;case 2:b.attr(a,"https:"+e)}}};a.find("a[href]").each(f("href"));a.find("img[src]").each(f("src"))},f=function(a,d,c,g,h){var l=null,b;for(b in a)if(a.hasOwnProperty(b)&&d.children(a[b]).length>=c){l=a[b];break}if(null===l)return"The description has less than "+c+" headers.";a=a.slice(b+1);var e=[h+"general"],p=["General"];d.children(l).each(function(){var a=
$(this);a.children("a.anchor.dynamic-anchor").remove();var b=a.attr("data-base-anchor");b||(b=String(Math.random()));e.push(h+b);p.push(a.text())});var k=Array(p.length);for(b=0;b<e.length;++b)k[b]=$("<div class='release-description-tab-content'></div>").attr("id",e[b]).addClass(g?"release-description-tab-horizontal":"release-description-tab-vertical");b=0;d.contents().each(function(){this instanceof HTMLHeadingElement&&this.tagName.toLowerCase()===l?++b:k[b].append(this)});c=0===k[0].children().length;
var m=$("<ul></ul>");for(b=0;b<e.length;++b)c&&0===b||m.append($("<li></li>").append($("<a></a>").attr("href","#"+e[b]).text(p[b].substr(0,35)+(35<p[b].length?"...":""))));m=$("<div></div>").attr("id",h+"container").append(m);for(b=0;b<e.length;++b)c&&0===b||(g&&f(a,k[b],4,!1,e[b]+"-"),m.append(k[b]));m.tabs({orientation:g?"horizontal":"vertical"});d.html("").append(m);return null};(function(){$("#how-to-install").dialog({autoOpen:!1,modal:!0,position:modalPosition,open:function(a,c){$(".ui-widget-overlay").bind("click",
function(){$("#how-to-install").dialog("close")})}});$("#release-description-bad-dialog").dialog({autoOpen:!1,position:modalPosition});$("#license-dialog").dialog({position:modalPosition,modal:!0,height:.8*window.innerHeight,width:.8*window.innerWidth,autoOpen:!1,open:function(a,c){$(".ui-widget-overlay").bind("click",function(){$("#license-dialog").dialog("close")})}})})();ghApi("users/"+$("#release-authors").attr("data-owner"),{},"GET",function(a){"User"===a.type&&(a=$("<li class='release-authors-entry'></li>").append($("<img/>").attr("src",
a.avatar_url).attr("width","16")).append(" @"+a.login).append(generateGhLink(a.html_url)),$("<li>Owner</li>").append($("<ul class='plugin-info release-authors-sub'></ul>").append(a)).prependTo($("#release-authors-main")))});if(!releaseDetails.isMine){var c=function(a,c,d,f,g,h,b){ajax("review.admin",{data:{relId:a,user:c,criteria:d,type:f,category:g,score:h,message:b,action:"add"},method:"POST",success:function(){location.replace(getRelativeRootPath()+("p/"+releaseDetails.name+"/"+releaseDetails.version))},
error:function(){location.replace(getRelativeRootPath()+("p/"+releaseDetails.name+"/"+releaseDetails.version))}})};var d=$("#review-dialog").dialog({title:"Poggit Review",autoOpen:!1,position:modalPosition,modal:!0,buttons:{Cancel:function(){d.dialog("close")},"Post Review":function(){var a=$("#review-criteria").val(),f=sessionData.session.adminLevel>=PoggitConsts.AdminLevel.MODERATOR?1:2,g=releaseDetails.mainCategory,h=$("#votes").val(),k=$("#review-message").val();c(releaseDetails.releaseId,"<?= Session::getInstance()->getName() ?>",
a,f,g,h,k);d.dialog("close");return!0}},open:function(){$(".ui-widget-overlay").bind("click",function(){d.dialog("close")})},close:function(){x[0].reset()}});var g=$("#review-warning"),k=d.find("#review-message"),h=function(){-1!==k.val().toLocaleLowerCase().indexOf("outdate")?g.text("Warning: Do not post negative reviews just because a plugin is outdated. Such reviews will be deleted."):g.text("")};k.change(h).keyup(h);var x=d.find("form").on("submit",function(a){a.preventDefault()});var t=$(".release-review-intent"),
y=t.find("> img");t.hover(function(){var a=this.getAttribute("data-score");t.each(function(){this.getAttribute("data-score")<=a&&$(this).find("> img").attr("src",getRelativeRootPath()+"res/Full_Star_Yellow.svg")})},function(){y.attr("src",getRelativeRootPath()+"res/Empty_Star.svg")}).click(function(){$("#votes").val(this.getAttribute("data-score"));d.dialog("open")})}if(sessionData.session.isLoggedIn&&releaseDetails.state===PoggitConsts.ReleaseState.checked){var u=function(a,c,d){ajax("release.vote",
{data:{relId:a,vote:c,message:d},method:"POST",success:function(){location.replace(getRelativeRootPath()+("p/"+releaseDetails.name+"/"+releaseDetails.version))},error:function(a){location.replace(getRelativeRootPath()+("p/"+releaseDetails.name+"/"+releaseDetails.version))}})};h=function(){var a=$("#vote-message").val();u(releaseDetails.releaseId,1,a);q.dialog("close");return!0};var n={Cancel:function(){q.dialog("close")}};0>=releaseDetails.myVote&&(n.Accept=h);var q=$("#voteup-dialog").dialog({title:"ACCEPT Plugin",
autoOpen:!1,position:modalPosition,modal:!0,buttons:n,open:function(){$(".ui-widget-overlay").bind("click",function(){$("#voteup-dialog").dialog("close")})},close:function(){z[0].reset()}});var z=q.find("form").on("submit",function(a){a.preventDefault()});$("#upvote").button().on("click",function(){q.dialog("open")});var r=$("#votedown-dialog").dialog({title:"REJECT Plugin",autoOpen:!1,position:modalPosition,modal:!0,buttons:{Cancel:function(){r.dialog("close")},Reject:function(){var a=$("#vote-message").val();
if(10>a.length)$("#vote-error").text("Please type at least 10 characters...");else return u(releaseDetails.releaseId,-1,a),r.dialog("close"),!0}},open:function(a,c){$(".ui-widget-overlay").bind("click",function(){$("#votedown-dialog").dialog("close")})},close:function(){A[0].reset()}});var A=r.find("form").on("submit",function(a){a.preventDefault()});$("#downvote").button().on("click",function(){r.dialog("open")})}h=$("#rdesc");n=$("#rchlog");a(h);a(n);if(!1!==sessionData.opts.makeTabs){if(null!==
getParameterByName("notabs",null)){$(".release-description").append($("<span class='colored-bullet yellow'></span>").css("cursor","pointer").click(function(){window.location=window.location.origin+window.location.pathname}).attr("title","Click to display description in tabs."));return}a=null;a="html"!==h.attr("data-desc-type")?"The plugin description is not in markdown format.":f("h1 h2 h3 h4 h5 h6".split(" "),h,2,!0,"rel-desc-tabs-");null!==a?($("#release-description-bad-reason").html(a),$(".release-description").append($("<span class='colored-bullet red'></span>").css("cursor",
"pointer").attr("title","Failed to display description in tabs: "+a))):$(".release-description").append($("<span class='colored-bullet green'></span>").css("cursor","pointer").click(function(){window.location=window.location.origin+window.location.pathname+"?notabs"}).attr("title","Click to display description directly without splitting into tabs."))}var v=[],w=0;n.children("ul").children("li").each(function(){this.hasAttribute("data-disabled")&&v.push(w);w++});n.tabs({disabled:v});$(".delete-release").click(function(){var a=
{my:"center top",at:"center top+100",of:window};$("#dialog-confirm").dialog({resizable:!1,height:"auto",width:400,position:a,clickOut:!0,modal:!0,buttons:{"Delete Forever":function(){$(this).dialog("close");ajax("release.statechange",{data:{relId:releaseDetails.releaseId,action:"delete"},method:"POST",success:function(){location.replace(getRelativeRootPath()+("p/"+releaseDetails.name+"/"+releaseDetails.version))},error:function(){location.replace(getRelativeRootPath()+("p/"+releaseDetails.name+"/"+
releaseDetails.version))}})},Cancel:function(){$(this).dialog("close")}},open:function(a,c){$(".ui-widget-overlay").bind("click",function(){$("#dialog-confirm").dialog("close")})}})});"#shield-template"===window.location.hash&&(alert("Thank you for submitting your plugin! Please have a look at the shields here and add them to the README on your repo."),window.location.hash="")});
