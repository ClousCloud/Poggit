var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.checkStringArgs=function(c,f,e){if(null==c)throw new TypeError("The 'this' value for String.prototype."+e+" must not be null or undefined");if(f instanceof RegExp)throw new TypeError("First argument to String.prototype."+e+" must not be a regular expression");return c+""};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,f,e){c!=Array.prototype&&c!=Object.prototype&&(c[f]=e.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(c,f,e,b){if(f){e=$jscomp.global;c=c.split(".");for(b=0;b<c.length-1;b++){var g=c[b];g in e||(e[g]={});e=e[g]}c=c[c.length-1];b=e[c];f=f(b);f!=b&&null!=f&&$jscomp.defineProperty(e,c,{configurable:!0,writable:!0,value:f})}};
$jscomp.polyfill("String.prototype.startsWith",function(c){return c?c:function(c,e){var b=$jscomp.checkStringArgs(this,c,"startsWith");c+="";var f=b.length,k=c.length;e=Math.max(0,Math.min(e|0,b.length));for(var h=0;h<k&&e<f;)if(b[e++]!=c[h++])return!1;return h>=k}},"es6","es3");$jscomp.findInternal=function(c,f,e){c instanceof String&&(c=String(c));for(var b=c.length,g=0;g<b;g++){var k=c[g];if(f.call(e,k,g,c))return{i:g,v:k}}return{i:-1,v:void 0}};
$jscomp.polyfill("Array.prototype.find",function(c){return c?c:function(c,e){return $jscomp.findInternal(this,c,e).v}},"es6","es3");
$(function(){function c(a){var c=a.attr("id"),m=[];a.find("a.anchor").each(function(){var a=$(this).addClass("dynamic-anchor").html("&sect;"),e=a.parent();a.appendTo(e);var d=this.id.substring(13);m.push(d);var b=c+"-section-"+d;e.attr("data-base-anchor",d);a.addClass("processed-section-anchor").attr("id",b).attr("href","#"+b).removeAttr("aria-hidden");dynamicAnchor.call(this)});var e=[],b=function(a){return function(){var b=$(this),d=this[a].substring(13);e.push(d);b.addClass("processed-custom-anchor").attr("id",
c+"-anchor-"+d)}};a.find("a[name^='user-content-']").each(b("name"));a.find("[id^='user-content-']").each(b("id"));b=function(a){return function(){var b=$(this),d=b.attr(a);switch(/^https?:\/\//i.test(d)?1:d.startsWith("//")?2:"/"===d.charAt(0)?3:"#"!==d.charAt(0)?4:5){case 5:d.startsWith("#poggit-")?b.attr(a,"#"+d.substring(8)):(d=d.substring(1),d.startsWith("user-content-")&&(d=d.substring(13)),-1!==m.indexOf(d)?b.addClass("section-reference").attr(a,"#"+(c+"-section-"+d)):-1!==e.indexOf(d)&&b.addClass("anchor-reference").attr(a,
"#"+(c+"-anchor-"+d)));break;case 4:b.attr(a,"https://github.com/"+releaseDetails.project.repo.owner+"/"+releaseDetails.project.repo.name+"/blob/"+releaseDetails.build.tree+d);break;case 3:b.attr(a,"https://github.com"+d);break;case 2:b.attr(a,"https:"+d)}}};a.find("a[href]").each(b("href"));a.find("img[src]").each(b("src"))}function f(a,c,b,e,h){for(var g=null,x,d=0;d<a.length;++d)if(c.children(a[d]).length>=b){g=a[d];x=d;break}if(null===g)return"The description has less than "+b+" headers.";var m=
[h+"-section-general"],k=["General"];c.children(g).each(function(){var a=$(this);a.children("a.anchor.dynamic-anchor").remove();var b=a.attr("data-base-anchor");b||(b=String(Math.random()));m.push(h+"-section-"+b);k.push(a.text())});var l=Array(k.length);for(b=0;b<m.length;++b)l[b]=$("<div class='release-description-tab-content'></div>").attr("id",m[b]).addClass(e?"release-description-tab-horizontal":"release-description-tab-vertical");var n={};for(b=0;b<m.length;++b)n[m[b]]=b;var q=0;c.contents().each(function(){if(this instanceof
HTMLHeadingElement&&this.tagName.toLowerCase()===g)++q;else{var a=$(this);l[q].append(this);a.hasClass("processed-custom-anchor")?n[this.id]=q:this instanceof HTMLHeadingElement&&(n[a.find(".dynamic-anchor").attr("id")]=q);a.find(".processed-custom-anchor").each(function(){n[this.id]=q})}});b=0===l[0].children().length;d=$("<ul></ul>");for(var p=0;p<m.length;++p)b&&0===p||d.append($("<li></li>").append($("<a></a>").attr("href","#"+m[p]).text(k[p].substr(0,35)+(35<k[p].length?"...":""))));var r=$("<div></div>").attr("id",
e?"release-description-container":"release-description-container-vertical").append(d);for(d=0;d<m.length;++d)b&&0===d||(e&&f(a.slice(x+1),l[d],4,!1,h),r.append(l[d]));r.tabs({orientation:e?"horizontal":"vertical"});c.html("").append(r);for(a=0;a<m.length;++a)l[a].find("a.section-reference, a.anchor-reference").click(function(){var a=$(this).attr("href").substring(1);void 0!==n[a]&&(r.tabs("option","active",n[a]),$("html, body").animate({scrollTop:document.getElementById(a).offsetTop},500))});return null}
(function(){$("#how-to-install").dialog({autoOpen:!1,modal:!0,position:modalPosition,open:function(a,b){$(".ui-widget-overlay").bind("click",function(){$("#how-to-install").dialog("close")})}});$("#release-description-bad-dialog").dialog({autoOpen:!1,position:modalPosition});$("#license-dialog").dialog({position:modalPosition,modal:!0,height:.8*window.innerHeight,width:.8*window.innerWidth,autoOpen:!1,open:function(a,b){$(".ui-widget-overlay").bind("click",function(){$("#license-dialog").dialog("close")})}})})();
ghApi("users/"+$("#release-authors").attr("data-owner"),{},"GET",function(a){"User"===a.type&&(a=$("<li class='release-authors-entry'></li>").append($("<img/>").attr("src",a.avatar_url).attr("width","16")).append(" @"+a.login).append(generateGhLink(a.html_url)),$("<li>Owner</li>").append($("<ul class='plugin-info release-authors-sub'></ul>").append(a)).prependTo($("#release-authors-main")))});if(!releaseDetails.isMine){var e=function(a,b,c,e,f,g,h){ajax("review.admin",{data:{relId:a,user:b,criteria:c,
type:e,category:f,score:g,message:h,action:"add"},method:"POST",success:function(){location.replace(getRelativeRootPath()+("p/"+releaseDetails.name+"/"+releaseDetails.version))},error:function(){location.replace(getRelativeRootPath()+("p/"+releaseDetails.name+"/"+releaseDetails.version))}})};var b=$("#review-dialog").dialog({title:"Poggit Review",autoOpen:!1,position:modalPosition,modal:!0,buttons:{Cancel:function(){b.dialog("close")},"Post Review":function(){var a=$("#review-criteria").val(),c=sessionData.session.adminLevel>=
PoggitConsts.AdminLevel.MODERATOR?1:2,f=releaseDetails.mainCategory,g=$("#votes").val(),h=$("#review-message").val();e(releaseDetails.releaseId,"<?= Session::getInstance()->getName() ?>",a,c,f,g,h);b.dialog("close");return!0}},open:function(){$(".ui-widget-overlay").bind("click",function(){b.dialog("close")})},close:function(){B[0].reset()}});var g=$("#review-warning"),k=b.find("#review-message"),h=function(){-1!==k.val().toLocaleLowerCase().indexOf("outdate")?g.text("Warning: Do not post negative reviews just because a plugin is outdated. Such reviews will be deleted."):
g.text("")};k.change(h).keyup(h);var B=b.find("form").on("submit",function(a){a.preventDefault()});var w=$(".release-review-intent"),C=w.find("> img");w.hover(function(){var a=this.getAttribute("data-score");w.each(function(){this.getAttribute("data-score")<=a&&$(this).find("> img").attr("src",getRelativeRootPath()+"res/Full_Star_Yellow.svg")})},function(){C.attr("src",getRelativeRootPath()+"res/Empty_Star.svg")}).click(function(){$("#votes").val(this.getAttribute("data-score"));b.dialog("open")})}if(sessionData.session.isLoggedIn&&
releaseDetails.state===PoggitConsts.ReleaseState.checked){var y=function(a,b,c){ajax("release.vote",{data:{relId:a,vote:b,message:c},method:"POST",success:function(){location.replace(getRelativeRootPath()+("p/"+releaseDetails.name+"/"+releaseDetails.version))},error:function(a){location.replace(getRelativeRootPath()+("p/"+releaseDetails.name+"/"+releaseDetails.version))}})};h=function(){var a=$("#vote-message").val();y(releaseDetails.releaseId,1,a);t.dialog("close");return!0};var l={Cancel:function(){t.dialog("close")}};
0>=releaseDetails.myVote&&(l.Accept=h);var t=$("#voteup-dialog").dialog({title:"ACCEPT Plugin",autoOpen:!1,position:modalPosition,modal:!0,buttons:l,open:function(){$(".ui-widget-overlay").bind("click",function(){$("#voteup-dialog").dialog("close")})},close:function(){D[0].reset()}});var D=t.find("form").on("submit",function(a){a.preventDefault()});$("#upvote").button().on("click",function(){t.dialog("open")});var u=$("#votedown-dialog").dialog({title:"REJECT Plugin",autoOpen:!1,position:modalPosition,
modal:!0,buttons:{Cancel:function(){u.dialog("close")},Reject:function(){var a=$("#vote-message").val();if(10>a.length)$("#vote-error").text("Please type at least 10 characters...");else return y(releaseDetails.releaseId,-1,a),u.dialog("close"),!0}},open:function(a,b){$(".ui-widget-overlay").bind("click",function(){$("#votedown-dialog").dialog("close")})},close:function(){E[0].reset()}});var E=u.find("form").on("submit",function(a){a.preventDefault()});$("#downvote").button().on("click",function(){u.dialog("open")})}h=
$("#rdesc");l=$("#rchlog");c(h);c(l);if(!1!==sessionData.opts.makeTabs){if(null!==getParameterByName("notabs",null)){$(".release-description").append($("<span class='colored-bullet yellow'></span>").css("cursor","pointer").click(function(){window.location=window.location.origin+window.location.pathname}).attr("title","Click to display description in tabs."));return}var v=null;v="html"!==h.attr("data-desc-type")?"The plugin description is not in markdown format.":f("h1 h2 h3 h4 h5 h6".split(" "),h,
2,!0,h.attr("id"));null!==v?($("#release-description-bad-reason").html(v),$(".release-description").append($("<span class='colored-bullet red'></span>").css("cursor","pointer").attr("title","Failed to display description in tabs: "+v))):$(".release-description").append($("<span class='colored-bullet green'></span>").css("cursor","pointer").click(function(){window.location=window.location.origin+window.location.pathname+"?notabs"}).attr("title","Click to display description directly without splitting into tabs."))}var z=
[],A=0;l.children("ul").children("li").each(function(){this.hasAttribute("data-disabled")&&z.push(A);A++});l.tabs({disabled:z});$(".delete-release").click(function(){var a={my:"center top",at:"center top+100",of:window};$("#dialog-confirm").dialog({resizable:!1,height:"auto",width:400,position:a,clickOut:!0,modal:!0,buttons:{"Delete Forever":function(){$(this).dialog("close");ajax("release.statechange",{data:{relId:releaseDetails.releaseId,action:"delete"},method:"POST",success:function(){location.replace(getRelativeRootPath()+
("p/"+releaseDetails.name+"/"+releaseDetails.version))},error:function(){location.replace(getRelativeRootPath()+("p/"+releaseDetails.name+"/"+releaseDetails.version))}})},Cancel:function(){$(this).dialog("close")}},open:function(a,b){$(".ui-widget-overlay").bind("click",function(){$("#dialog-confirm").dialog("close")})}})});"#shield-template"===window.location.hash&&(alert("Thank you for submitting your plugin! Please have a look at the shields here and add them to the README on your repo."),window.location.hash=
"")});
