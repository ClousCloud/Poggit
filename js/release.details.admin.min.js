$(function(){function f(a){ajax("release.statechange",{data:{relId:releaseDetails.releaseId,state:a},method:"POST",success:function(){location.replace(getRelativeRootPath()+("p/"+releaseDetails.name+"/"+releaseDetails.version))}})}var c,a=$("<div></div>"),d=$("<textarea cols='80' rows='10'></textarea>").appendTo(a);a.dialog({autoOpen:!1,position:modalPosition,modal:!0,buttons:{Post:function(){ghApi(releaseDetails.rejectPath,{body:d.val()},"POST",c)}}});var e=$("<select class='inline-select'></select>").change(function(){ajax("release.statechange",
{data:{relId:releaseDetails.releaseId,state:e.val()},method:"POST",success:function(){location.replace(getRelativeRootPath()+("p/"+releaseDetails.name+"/"+releaseDetails.version))}})}),b;for(b in PoggitConsts.ReleaseState)if(PoggitConsts.ReleaseState.hasOwnProperty(b)){var g=PoggitConsts.ReleaseState[b],h=$("<option></option>").attr("value",g).text(b.ucfirst());h.prop("selected",releaseDetails.state===g);h.appendTo(e)}$("<div id='release-admin'></div>").append($("<span class='action'>Pending...</span>").click(function(){a.dialog("option",
"title","Mark as pending");d.val("Dear @"+releaseDetails.project.repo.owner+':\nRegarding the release you submitted, named "**'+releaseDetails.name+'**" (v'+releaseDetails.version+"), for the project ["+releaseDetails.project.name+"](https://poggit.pmmp.io/ci/"+releaseDetails.project.repo.owner+"/"+releaseDetails.project.repo.name+"/"+releaseDetails.project.name+") on "+(new Date(1E3*releaseDetails.created)).toISOString()+", there are some problems with the values in the submit form.\n\n\n\nYour release has been reset to draft. Please [edit the release](https://poggit.pmmp.io/edit/"+
releaseDetails.project.repo.owner+"/"+releaseDetails.project.repo.name+"/"+releaseDetails.project.name+"/"+releaseDetails.build.internal+') to resolve these problems, then click "Submit" on the edit page to have the plugin reviewed again.\n\n> Note: This comment is created here because this is the last commit when the released build was created.\n\n> via Poggit (@poggit-bot)');c=function(){f(PoggitConsts.ReleaseState.draft)};a.dialog("open")})).append($("<span class='action'>Reject...</span>").click(function(){a.dialog("option",
"title","Reject plugin");d.val("Dear @"+releaseDetails.project.repo.owner+':\nI regret to inform you that the release you submitted, named "**'+releaseDetails.name+'**" (v'+releaseDetails.version+"), for the project ["+releaseDetails.project.name+"](https://poggit.pmmp.io/ci/"+releaseDetails.project.repo.owner+"/"+releaseDetails.project.repo.name+"/"+releaseDetails.project.name+") on "+(new Date(1E3*releaseDetails.created)).toISOString()+", has been rejected.\n\n\n\nPlease resolve the issues listed above and submit the updated plugin again.\n\n> Note: This comment is created here because this is the last commit when the released build was created.\n\n> via Poggit (@poggit-bot)");
c=function(){f(PoggitConsts.ReleaseState.rejected)};a.dialog("open")})).append(e).insertAfter("#release-admin-marker")});
