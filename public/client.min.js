$(function(){function l(){g("session/online",{},function(a){return $("#online-user-count").text(a+" online").css("display","list-item")})}function g(a,c,f,b){void 0===c&&(c={});void 0===f&&(f=p);void 0===b&&(b=function(b){return alert("Error POSTing "+a+": "+b)});$.post("/csrf",{},function(d){$.ajax("/csrf/"+a,{dataType:"json",data:JSON.stringify(c),headers:{"Content-Type":"application/json","X-Poggit-CSRF":d},method:"POST",success:function(a){a.success?f(a.data):b(a.message)}})})}function q(a){void 0===
a&&(a=window.location.toString());g("login/persistLoc",{path:a},function(a){window.location.assign("https://github.com/login/oauth/authorize?client_id="+PoggitConsts.App.ClientId+"&state="+a.state)})}function p(){}console.info("Help us improve Poggit on GitHub: https://github.com/poggit/poggit");(function(){PoggitConsts.Debug||"https"===window.location.protocol.replace(":","")&&"poggit.pmmp.io"===location.host||location.replace("https://poggit.pmmp.io"+window.location.pathname);var a=location.pathname.split("/",
3);3===a.length&&void 0!==m[a[1]]&&history.replaceState(null,"","/"+m[a[1]]+"/"+a[2])})();var e=$(document);e.find(".navbutton").each(function(){if(!this.hasAttribute("data-navbutton-init")){this.setAttribute("data-navbutton-init","true");var a=$(this),c=this.getAttribute("data-target"),f;if(f=!a.hasClass("extlink"))c="/"+c;var b=$("<a></a>");b.addClass("navlink");b.attr("href",c);f||b.attr("target","_blank");a.wrapInner(b)}});e.tooltip({content:function(){var a=$(this);return a.hasClass("html-tooltip")?
a.prop("title"):$("<span></span>").text(a.prop("title")).html()}});e.find("#gh-login").click(function(){return q()});e.find("#toggle-wrapper").each(function(){if(!this.hasAttribute("data-toggle-init")){this.setAttribute("data-toggle-init","true");var a=$(this),c=this.getAttribute("data-name"),f=!1;if(null===c&&(c=this.getAttribute("data-escaped-name"),f=!0,null===c))throw Error("Toggle name missing");var b="true"===this.getAttribute("data-opened"),d=$("<div class='wrapper' data-opened='false'></div>");
a.wrapInner(d);var e=$("<h5 class='wrapper-header'></h5>");f?e.text(c):e.html(c);var k=$("<img width='24' class='wrapper-toggle-button'/>").attr("src","/res/expand_arrow-24.png"),h=function(){d.attr("data-opened","false");a.css("display","none");k.attr("src","/res/expand_arrow-24.png")},g=function(){d.attr("data-opened","true");a.css("display","flex");k.attr("src","/res/collapse_arrow-24.png")};d.prepend(e.append(k.click(function(){"true"===d.attr("data-opened")?h():g()})));b?g():h()}});e.find(".dynamic-anchor").each(function(){if(!this.hasAttribute("data-dynamic-anchor-init")){this.setAttribute("data-dynamic-anchor-init",
"true");var a=$(this);a.parent().hover(function(){return a.css("visibility","visible")},function(){return a.css("visibility","hidden")})}});e.find("#hide-tos-button").click(function(){return g("session/hideTos",{},function(){document.getElementById("remind-tos").style.display="none"})});e.find("#nav-logout").click(function(){return g("login/logout",{},function(){return window.location.reload()})});setInterval(function(){var a=new Date,c=a.getTime();$(".time, .time-elapse").each(function(){var f=Number(this.getAttribute("data-timestamp")),
b=new Date(f),d=Math.abs(c-f),e=10>b.getHours()?"0"+b.getHours():b.getHours().toString(),g=10>b.getMinutes()?"0"+b.getMinutes():b.getMinutes().toString(),h=10>b.getSeconds()?"0"+b.getSeconds():b.getSeconds().toString();a.getFullYear()!==b.getFullYear()?this.innerText=n[b.getMonth()]+" "+b.getDate()+", "+b.getFullYear():6048E5<d?this.innerText=n[b.getMonth()]+" "+b.getDate()+", "+e+":"+g+":"+h:a.getDate()!==b.getDate()?this.innerText=r[b.getDay()]+", "+e+":"+g+":"+h:this.innerText=144E5<d?e+":"+g+
":"+h:(36E5<=d?Math.floor(d/36E5)+" hours ":6E4<=d?Math.floor(d/6E4)+" minutes ":Math.floor(d/1E3)+" seconds ")+(c>f?"ago":"later")})},300);setInterval(l,6E4);l();var m={pi:"plugins",index:"plugins",release:"p",rel:"p",plugin:"p",build:"ci",b:"ci",dev:"ci"},n="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),r="Sun Mon Tue Wed Thu Fri Sat".split(" ")});
